<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>瀑布流</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
	<link rel="stylesheet" href="reset.css">
	<style>
		#box{width: 1080px;margin:20px auto;overflow: hidden;}
		#box ul{width: 248px;float: left;margin:0 10px;}
		#box ul li{width: 248px;border:1px solid red;margin:10px 0;}
		#box ul li img{width: 248px;display: block;}
	</style>
</head>
<body>
	<div id="box">
		<ul>
			<li><img src="images/1.png" alt=""></li>
		</ul>
		<ul></ul>
		<ul></ul>
		<ul></ul>
	</div>
	<script>
		var box=document.getElementById('box');
		var uls=box.children;
		for (var i = 0; i < 16; i++) {
			appendli();
		};
		function appendli () {
			var oli=document.createElement('li');
			var x=Math.ceil(Math.random()*35);
			oli.innerHTML='<img src="images/'+x+'.png" alt="">';
			var ul_01=uls[0].offsetHeight;
			var ul_02=uls[1].offsetHeight;
			var ul_03=uls[2].offsetHeight;
			var ul_04=uls[3].offsetHeight;
			var ulmin=null;
			var minH=Math.min(ul_01,ul_02,ul_03,ul_04);
			for (var i = 0; i < uls.length; i++) {
				if(uls[i].offsetHeight==minH){
					ulmin=uls[i];
				}
			};
			ulmin.appendChild(oli);
		}
		window.onscroll=function () {
			var wscroll=document.body.scrollTop||document.documentElement.scrollTop;
			var wH=document.documentElement.clientHeight;
			var docH=document.documentElement.offsetHeight;
			if (docH-wH-wscroll<500) {
				for (var i = 0; i < 16; i++) {
					appendli();
				};
			} 
		}
	</script>
</body>
</html>
